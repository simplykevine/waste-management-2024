{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container4">
    <!-- Profile Icon and Dashboard Title -->
    <div class="d-flex justify-content-between align-items-center mt-5">
        <h2>Admin Dashboard</h2>
        <div class="profile-icon">
            <img src="{{ url_for('static', filename='images/IMG_0080.JPG') }}" alt="Profile Icon" class="rounded-circle" width="50" height="50">
        </div>
    </div>

</div>

<!-- Sidebar -->
<div class="sidebar mt-5">
    
    <a href="/system">System Performance</a>
    <a href="/user_mgt">User Management</a>
</div>

    <!-- Display Totals -->
    <div class="row mt-4">
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Total Schedules</h5>
                    <p class="card-text">{{ total_schedules }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Total Recycling (kg)</h5>
                    <p class="card-text">{{ total_recycling }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Total Users</h5>
                    <p class="card-text">{{ total_users }}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-12">
            <h4>User Management</h4>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="userManagementTable">
                    {% for user in users %}
                        <tr>
                            <td>{{ user.username }}</td>
                            <td>{{ user.email }}</td>
                            <td>{{ user.role }}</td>
                            <td>
                                <!-- Add actions for managing users here -->
                                <button class="btn btn-warning">Edit</button>
                                <button class="btn btn-danger">Delete</button>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="4">No users found.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-12">
            <h4>Scheduled Waste Collections</h4>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Address</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="collectionManagementTable">
                    {% for collection in collections %}
                        <tr>
                            <td>{{ collection.address }}</td>
                            <td>{{ collection.collection_date }}</td>
                            <td>{{ collection.collection_time }}</td>
                            <td>{{ collection.status }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="4">No collections found.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
{% block background_video %}{% endblock %}